{"version":3,"file":"refactory-mineclear.umd.js","sources":["../src/MineClear.ts","../src/components/DOM.ts","../src/util/EventCenter.ts","../src/components/Face.ts","../src/util/getNumberHTMLStr.ts","../src/components/FlagCounter.ts","../src/components/Timer.ts","../src/components/DifficultyPicker.ts","../src/util/stopPropagation.js","../src/util/StateMachine.ts","../src/util/getCurentTime.ts","../src/util/log.ts","../src/components/Block.ts","../src/components/MineArea.ts","../src/config.ts","../src/components/RackList.ts","../src/components/GameWin.ts","../src/Buider/Build.ts","../src/director/Director.ts","../src/director/DirectorEasy.ts","../src/director/DirectorGeneral.ts","../src/director/DirectorHard.ts","../src/ClassFactory/classMap.ts","../src/ClassFactory/index.ts","../src/index.ts"],"sourcesContent":["import Face from './components/Face'\nimport FlagCounter from './components/FlagCounter'\nimport Timer from './components/Timer'\nimport MineArea from './components/MineArea'\nimport DifficultyPicker from './components/DifficultyPicker'\nimport RankList from './components/RackList'\nimport AddRank from './components/GameWin'\n\nclass MineClear {\n  $el: any\n\n  difficultyPicker: DifficultyPicker\n  face: Face\n  timer: Timer\n  flagCounter: FlagCounter\n  mineArea: MineArea\n  rankList: RankList\n  addRank: AddRank\n\n  setDifficultyPickerStr(difficultyPicker: DifficultyPicker) {\n    this.difficultyPicker = difficultyPicker\n  }\n  getDifficultyPickerStr() {\n    return this.difficultyPicker.getHTMLStr()\n  }\n\n  setFace(face: Face): void {\n    this.face = face\n  }\n  getFaceStr(): string {\n    return this.face.getHTMLStr()\n  }\n\n  setTimer(timer: Timer): void {\n    this.timer = timer\n  }\n  getTimerStr(): string {\n    return this.timer.getHTMLStr()\n  }\n\n  setFlagCounter(flagCounter: FlagCounter): void {\n    this.flagCounter = flagCounter\n  }\n  getFlagCounterStr(): string {\n    return this.flagCounter.getHTMLStr()\n  }\n\n  setMineArea(mineArea: MineArea): void {\n    this.mineArea = mineArea\n  }\n  getMineAreaStr(): string {\n    return this.mineArea.getHTMLStr()\n  }\n\n  setRankList(rankList: RankList): void {\n    this.rankList = rankList\n  }\n  getRankList(): string {\n    return this.rankList.getHTMLStr()\n  }\n\n  setAddRank(rankList: AddRank): void {\n    this.addRank = rankList\n  }\n  getAddRank(): string {\n    return this.rankList.getHTMLStr()\n  }\n}\n\nexport default MineClear\n","abstract class DOM {\n  protected htmlStr: string\n  protected dom: any\n  protected id: string\n  public abstract getHTMLStr(): string\n}\n\nexport default DOM\n","class EventCenter {\n  // 存储事件于其回调函数\n  clientList: {\n    [propName: string]: Array<Function>\n  } = {}\n\n  // 监听事件，为事件名添加回调函数\n  listen(eventName: string, callback: Function): void {\n    if (!this.clientList[eventName]) {\n      this.clientList[eventName] = []\n    }\n    this.clientList[eventName].push(callback) // 订阅的消息添加进缓存列表\n  }\n\n  // 出发某事件，调用其所有的回调函数\n  trigger(eventName, ...args): boolean {\n    var callbacks = this.clientList[eventName]\n    if (!callbacks || callbacks.length === 0) {\n      // 如果没有绑定对应的消息\n      return false\n    }\n    for (var i = 0, callback; (callback = callbacks[i++]); ) {\n      callback(...args)\n    }\n    return true\n  }\n\n  // 为某个事件移除一个监听对象\n  remove(eventName: string, callback: Function): void {\n    var callbacks = this.clientList[eventName]\n    if (!callbacks) {\n      // 如果 eventName 对应的消息没有被人订阅，则直接返回\n      return\n    }\n    if (!callback) {\n      // 如果没有传入具体的回调函数，表示需要取消 eventName 对应消息的所有订阅\n      callbacks && (callbacks.length = 0)\n    } else {\n      for (var l = callbacks.length - 1; l >= 0; l--) {\n        // 反向遍历订阅的回调函数列表\n        var _callback = callbacks[l]\n        if (_callback === callback) {\n          callbacks.splice(l, 1) // 删除订阅者的回调函数\n        }\n      }\n    }\n  }\n\n  // 清空缓存\n  clearAll() {\n    this.clientList = {}\n  }\n}\n\n// 返回单例\nlet getSingleEventCenter = (function() {\n  let eventCenter\n  return function() {\n    if (!eventCenter) {\n      eventCenter = new EventCenter()\n    }\n    return eventCenter\n  }\n})()\n\nexport default getSingleEventCenter\n","import DOM from './DOM'\nimport getEventCenter from '../util/EventCenter'\nimport classFactory from '../ClassFactory'\n\nconst faceImg = {\n  smile: `<img src=\"./img/face_normal.bmp\" alt=\"\">`,\n  cry: `<img src=\"./img/face_fail.bmp\" alt=\"\">`\n}\n\nclass Face extends DOM {\n  constructor() {\n    super()\n    this.id = 'face'\n    setTimeout(() => {\n      this.bindEvent()\n    })\n  }\n\n  getHTMLStr(): string {\n    return `\n      <div class=\"face\" id=\"face\">\n        ${faceImg.smile}\n      </div>\n    `\n  }\n\n  bindEvent(): any {\n    this.dom = document.getElementById(this.id)\n    this.dom.onclick = () => {\n      this.reStartGame()\n    }\n    const eventCenter = getEventCenter()\n    eventCenter.listen('bomb_exploded', this.cryFace.bind(this))\n  }\n\n  cryFace(): any {\n    this.dom.innerHTML = faceImg.cry\n  }\n\n  /**\n   * 使用反射，重新构建APP\n   */\n  reStartGame(): void {\n    try {\n      const eventCenter = getEventCenter()\n      eventCenter.clearAll()\n      const director = classFactory(`Director${window['difficulty']}`)\n      director.construct('app')\n    } catch (e) {\n      console.error(e)\n    }\n  }\n}\nexport default Face\n","export default function getNumerHTMLStr(number) {\n  const secondNums = ('000' + number).slice(-3).split('')\n\n  return `\n        <img src=\"./img/d${secondNums[0]}.bmp\" alt=\"\">\n        <img src=\"./img/d${secondNums[1]}.bmp\" alt=\"\">\n        <img src=\"./img/d${secondNums[2]}.bmp\" alt=\"\">\n    `\n}\n","import DOM from './DOM'\nimport getEventCenter from '../util/EventCenter'\nimport getNumberHTMLStr from '../util/getNumberHTMLStr'\n\nclass FlagCounter extends DOM {\n  private flagNum: number = 0\n  private mineNum: number = 0\n  private correctFind: number = 0\n  constructor(mineNum) {\n    super()\n    this.id = 'flagcounter'\n    this.flagNum = this.mineNum = mineNum\n    setTimeout(() => {\n      this.bindEvent()\n    })\n  }\n\n  public getHTMLStr(): string {\n    return `\n      <div class=\"flagsNum\" id=\"flagcounter\">\n          ${getNumberHTMLStr(this.flagNum)}\n      </div>\n    `\n  }\n\n  private bindEvent() {\n    this.dom = document.getElementById(this.id)\n\n    const eventCenter = getEventCenter()\n\n    eventCenter.listen('setFlagNum', num => {\n      this.flagNum = num\n    })\n\n    eventCenter.listen('flag_unuse', () => {\n      this.flagNum++\n      this.dom.innerHTML = getNumberHTMLStr(this.flagNum)\n    })\n\n    eventCenter.listen('flag_use', this.useFlag.bind(this))\n\n    eventCenter.listen('correct_find', () => {\n      this.correctFind++\n    })\n\n    eventCenter.listen('error_find', () => {\n      this.correctFind--\n    })\n  }\n\n  private useFlag(x, y) {\n    const eventCenter = getEventCenter()\n    this.flagNum--\n    if (this.flagNum < 0) {\n      eventCenter.trigger('flag_empty', x, y)\n      return\n    } else if (this.flagNum == 0) {\n      if (this.correctFind === this.mineNum) {\n        eventCenter.trigger('game_win')\n      }\n    }\n    this.dom.innerHTML = getNumberHTMLStr(this.flagNum)\n  }\n}\n\nexport default FlagCounter\n","import DOM from './DOM'\nimport getEventCenter from '../util/EventCenter'\nimport getNumberHTMLStr from '../util/getNumberHTMLStr'\n\nclass Timer extends DOM {\n  private timer = null\n  private second: number = 0\n  constructor() {\n    super()\n    this.id = 'timer'\n    setTimeout(() => {\n      this.bindEvent()\n    })\n  }\n\n  public getHTMLStr(): string {\n    return `\n      <div class=\"timer\" id=\"timer\">\n          ${getNumberHTMLStr(this.second)}\n      </div>\n    `\n  }\n\n  private bindEvent() {\n    this.dom = document.getElementById(this.id)\n\n    const eventCenter = getEventCenter()\n    eventCenter.listen('bomb_exploded', this.endTimer.bind(this))\n    eventCenter.listen('game_win', this.endTimer.bind(this))\n    eventCenter.listen('minearea_click', this.startTimer.bind(this))\n  }\n\n  private startTimer() {\n    if (!this.timer) {\n      this.timer = setInterval(() => {\n        this.secondAdd()\n      }, 1000)\n    }\n  }\n\n  private endTimer() {\n    clearInterval(this.timer)\n  }\n\n  private secondAdd(): void {\n    this.second++\n    window['palyTime'] = this.second\n    this.dom.innerHTML = getNumberHTMLStr(this.second)\n  }\n}\n\nexport default Timer\n","import DOM from './DOM'\nimport classFactory from '../ClassFactory'\nimport getEventCenter from '../util/EventCenter'\nimport config from '../config'\n\nclass DifficultyPicker extends DOM {\n  difficultyMap = {\n    Easy: '简单',\n    General: '普通',\n    Hard: '困难'\n  }\n  constructor() {\n    super()\n    this.id = 'difficulty'\n    setTimeout(() => {\n      this.bindEvent()\n    })\n  }\n\n  private bindEvent(): any {\n    this.dom = document.getElementById(this.id)\n    this.dom.onclick = e => {\n      const value = (<any>e.target).value\n      if (value != undefined && value != 0) {\n        this.reStartGame(value)\n      }\n    }\n  }\n\n  private reStartGame(difficulty: string) {\n    try {\n      const eventCenter = getEventCenter()\n      eventCenter.clearAll()\n      const director = classFactory(`Director${difficulty}`)\n      window['difficulty'] = difficulty\n      director.construct('app')\n    } catch (e) {\n      console.error(e)\n    }\n  }\n\n  getHTMLStr(): string {\n    const difficulty = window['difficulty']\n    return `\n      <div class=\"option\">\n        <span>难度: </span>\n        <span>${this.difficultyMap[difficulty]}</span>\n        <ul class=\"difficul\" id=\"difficulty\">\n            <li><label><input name=\"difficultyopt\" type=\"radio\" value=\"Easy\" ${difficulty ==\n              'Easy' && 'checked'}/><span></span>${this.difficultyMap.Easy}</label></li>\n            <li><label><input name=\"difficultyopt\" type=\"radio\" value=\"General\" ${difficulty ==\n              'General' && 'checked'}/><span></span>${this.difficultyMap.General}</label></li>\n            <li><label><input name=\"difficultyopt\" type=\"radio\" value=\"Hard\" ${difficulty ==\n              'Hard' && 'checked'}/><span></span>${this.difficultyMap.Hard}</label></li>\n        </ul>\n      </div>\n    `\n  }\n}\n\nexport default DifficultyPicker\n","/**\r\n * 阻止时间冒泡\r\n * @param {*} event 事件\r\n */\r\nfunction stopBubble(event) {\r\n  if (event.stopPropagation) {\r\n    event.stopPropagation()\r\n  } else {\r\n    event.cancelBubble = true\r\n  }\r\n  return false\r\n}\r\n\r\nexport default stopBubble","interface StateMap {\n  [propName: string]: {\n    nextState: string\n    handler: Function\n  }\n}\n/**\n * 简单状态机\n */\nclass StateMachine {\n  stateMap: StateMap\n  curState\n  constructor(curState: string, stateMap: StateMap) {\n    this.stateMap = stateMap\n    this.curState = curState\n  }\n  next(...args) {\n    this.curState = this.stateMap[this.curState].nextState\n    this.stateMap[this.curState].handler()\n    return false\n  }\n}\n\nexport default StateMachine\n","export default function getCurentTime() {\n  var now = new Date()\n\n  var year = now.getFullYear() //年\n  var month = now.getMonth() + 1 //月\n  var day = now.getDate() //日\n  var hh = now.getHours() //时\n  var mm = now.getMinutes() //分\n\n  var clock = year + '-'\n\n  if (month < 10) clock += '0'\n  clock += month + '-'\n\n  if (day < 10) clock += '0'\n  clock += day + ' '\n\n  if (hh < 10) clock += '0'\n  clock += hh + ':'\n\n  if (mm < 10) clock += '0'\n  clock += mm\n\n  return clock\n}\n","import getCurTime from './getCurentTime'\n/**\n * 记录日志\n * @param type 日志名\n */\nexport default function(type) {\n  return function(target: any, propertyKey: string, descriptor: PropertyDescriptor) {\n    var oldValue = descriptor.value\n\n    descriptor.value = function() {\n      console.log(`${type}  ${getCurTime()}`)\n      return oldValue.apply(this, arguments)\n    }\n\n    return descriptor\n  }\n}\n","import DOM from './DOM'\nimport stopBubble from '../util/stopPropagation'\nimport getEventCenter from '../util/EventCenter'\nimport StateMachine from '../util/StateMachine'\nimport log from '../util/log'\n\nclass Block extends DOM {\n  public point: number = 0\n  private isBomb: boolean\n  private x: number\n  private y: number\n  private hasClicked: boolean = false\n  private rightClickState: StateMachine\n\n  constructor(isBomb: boolean, posX, posY) {\n    super()\n    this.isBomb = isBomb\n    this.x = posX\n    this.y = posY\n    this.id = `block_${this.x}_${this.y}`\n    this.listenEvent()\n    this.initState()\n    setTimeout(() => this.bindEvent())\n  }\n\n  // 初始化时获得其DOM字串\n  public getHTMLStr(): string {\n    return `<li id=\"${this.id}\" class=\"block\"></li>`\n  }\n\n  // 判断是否是雷\n  public isbomb(): boolean {\n    return this.isBomb\n  }\n\n  // 注册事件监听\n  private listenEvent(): void {\n    const eventCenter = getEventCenter()\n    if (this.isBomb) {\n      eventCenter.listen('bomb_exploded', this.exploade.bind(this))\n    } else {\n      eventCenter.listen('blank_expand', this.showPoint.bind(this))\n      eventCenter.listen('bomb_exploded', () => {\n        this.hasClicked = true\n      })\n    }\n    // 当旗子用完了之后，标记为 ‘?’\n    eventCenter.listen('flag_empty', (x, y) => {\n      if (x === this.x && y === this.y) {\n        this.rightClickState.next()\n      }\n    })\n  }\n\n  // 使用转态模式管理扫雷时右键点击时方块的样式改变\n  private initState(): void {\n    const eventCenter = getEventCenter()\n    this.rightClickState = new StateMachine('blank', {\n      blank: {\n        nextState: 'flag',\n        handler: () => {\n          this.dom.innerHTML = ``\n        }\n      },\n      flag: {\n        nextState: 'doubt',\n        handler: () => {\n          this.dom.innerHTML = `<img src=\"./img/flag.bmp\" alt=\"\">`\n          if (this.isBomb) {\n            eventCenter.trigger('correct_find')\n          }\n          eventCenter.trigger('flag_use', this.x, this.y)\n        }\n      },\n      doubt: {\n        nextState: 'blank',\n        handler: () => {\n          this.dom.innerHTML = `<img src=\"./img/ask.bmp\" alt=\"\">`\n          if (this.isBomb) {\n            eventCenter.trigger('error_find')\n          }\n          eventCenter.trigger('flag_unuse')\n        }\n      }\n    })\n  }\n\n  // 雷爆炸\n  @log('fail')\n  private exploade(id): void {\n    this.hasClicked = true\n    if (this.id === id) {\n      this.dom.innerHTML = `<img src=\"./img/error.bmp\" alt=\"\">`\n    } else {\n      this.dom.innerHTML = `<img src=\"./img/blood.bmp\" alt=\"\">`\n    }\n  }\n\n  /**\n   * 展示此格子的值，如果此格子为空白点，则触发 ‘blank_expand’事件\n   * @param x\n   * @param y\n   */\n  private showPoint(x, y) {\n    // 判断是自己或者是周围的点\n    const isAroundOrSlef =\n      (x === this.x || x === this.x + 1 || x === this.x - 1) &&\n      (y === this.y || y === this.y + 1 || y === this.y - 1)\n\n    if (isAroundOrSlef && !this.hasClicked) {\n      this.dom.innerHTML = '<span class=\"point' + this.point + '\">' + this.point + '</span>'\n      // 他也是空白点，那么需要拓展开来\n      if (this.point === 0) {\n        this.hasClicked = true\n        const eventCenter = getEventCenter()\n        eventCenter.trigger('blank_expand', this.x, this.y)\n      } else {\n        this.hasClicked = true\n      }\n    }\n  }\n\n  // 绑定事件\n  private bindEvent() {\n    this.dom = document.getElementById(this.id)\n    // 左键点击\n    this.dom.onclick = () => {\n      if (this.isBomb) {\n        const eventCenter = getEventCenter()\n        eventCenter.trigger('bomb_exploded', this.id)\n      } else {\n        this.showPoint(this.x, this.y)\n      }\n    }\n    // 右键点击\n    this.dom.oncontextmenu = e => {\n      stopBubble(e)\n      if (!this.hasClicked) {\n        this.rightClickState.next()\n      }\n      return false\n    }\n  }\n}\n\nexport default Block\n","import DOM from './DOM'\nimport Block from './Block'\nimport getEventCenter from '../util/EventCenter'\n\nclass MineArea extends DOM {\n  public mineNum: number = 0\n  protected row: number\n  protected col: number\n  protected mineProbability: number\n  private blockMap: Array<Array<Block>>\n\n  constructor(col, row, mineProbability) {\n    super()\n    this.col = col\n    this.row = row\n    this.mineProbability = mineProbability\n    this.createMineMap()\n    this.setPoint()\n    setTimeout(() => this.bindEvent())\n  }\n\n  public getHTMLStr(): string {\n    this.id = 'minearea'\n    let htmlStr = ''\n    htmlStr += `<div class=\"mines\" id=\"minearea\"> <ul class=\"col\">`\n    for (let y = 0; y < this.col; y++) {\n      htmlStr += `<li><ul class=\"row\">`\n      for (let x = 0; x < this.row; x++) {\n        htmlStr += this.blockMap[y][x].getHTMLStr()\n      }\n      htmlStr += `</ul> </li>`\n    }\n    htmlStr += `</ul> </div>`\n    return htmlStr\n  }\n\n  // 创建map\n  protected createMineMap(): void {\n    this.blockMap = []\n    //y 为纵向坐标\n    for (let y = 0; y < this.col; y++) {\n      this.blockMap[y] = []\n      //x 为横向坐标\n      for (let x = 0; x < this.row; x++) {\n        const isMine = this.getRandomByProbablity()\n        isMine && this.mineNum++\n        this.blockMap[y].push(new Block(isMine, y, x))\n      }\n    }\n    const eventCenter = getEventCenter()\n    window['mineNum'] = this.mineNum\n    eventCenter.trigger('setFlagNum', this.mineNum)\n  }\n\n  // 设置点数\n  protected setPoint(): void {\n    const map = this.blockMap\n    for (let y = 0; y < this.col; y++) {\n      for (let x = 0; x < this.row; x++) {\n        if (map[y][x].isbomb()) {\n          if (y > 0 && !map[y - 1][x].isbomb()) {\n            map[y - 1][x].point++ //上方\n          }\n          if (y < this.col - 1 && !map[y + 1][x].isbomb()) {\n            map[y + 1][x].point++ //下方\n          }\n          if (x > 0 && !map[y][x - 1].isbomb()) {\n            map[y][x - 1].point++ //左方\n          }\n          if (x < this.row - 1 && !map[y][x + 1].isbomb()) {\n            map[y][x + 1].point++ //右方\n          }\n          if (x > 0 && y > 0 && !map[y - 1][x - 1].isbomb()) {\n            map[y - 1][x - 1].point++ //左上方\n          }\n          if (x < this.row - 1 && y > 0 && !map[y - 1][x + 1].isbomb()) {\n            map[y - 1][x + 1].point++ // 右上方\n          }\n          if (x > 0 && y < this.col - 1 && !map[y + 1][x - 1].isbomb()) {\n            map[y + 1][x - 1].point++ //左下方\n          }\n          if (x < this.row - 1 && y < this.col - 1 && !map[y + 1][x + 1].isbomb()) {\n            map[y + 1][x + 1].point++ //右下方\n          }\n        }\n      }\n    }\n  }\n\n  // 绑定事件\n  protected bindEvent(): void {\n    this.dom = document.getElementById(this.id)\n    this.dom.onclick = () => {\n      const eventCenter = getEventCenter()\n      eventCenter.trigger('minearea_click')\n    }\n  }\n\n  private getRandomByProbablity(): boolean {\n    return Math.random() > 1 - this.mineProbability\n  }\n}\n\nexport default MineArea\n","export default {\n  easy: {\n    name: '简单',\n    col: 6,\n    row: 8,\n    mineProbability: 0.1\n  },\n  general: {\n    name: '普通',\n    row: 18,\n    col: 14,\n    mineProbability: 0.12\n  },\n  hard: {\n    name: '困难',\n    col: 16,\n    row: 30,\n    mineProbability: 0.15\n  },\n  blockWidth: 25,\n  blockHeight: 25\n}\n","import DOM from './DOM'\nimport getEventCenter from '../util/EventCenter'\nimport config from '../config'\nimport log from '../util/log'\n\nclass RankList extends DOM {\n  areaHeight: number\n  areaWidth: number\n  constructor() {\n    super()\n    this.id = 'rank'\n    setTimeout(() => {\n      this.bindEvent()\n    })\n  }\n\n  getHTMLStr(): string {\n    return `\n        <div class=\"option\" id=\"rank\">\n            排行榜\n        </div>\n    `\n  }\n\n  bindEvent(): any {\n    this.dom = document.getElementById(this.id)\n    const eventCenter = getEventCenter()\n\n    this.dom.onclick = () => {\n      this.showRankList()\n    }\n    eventCenter.listen('showRankList', () => {\n      this.showRankList()\n    })\n  }\n\n  getRackList(): Array<any> {\n    var rankStr = localStorage.getItem('rank' + window['difficulty'])\n    var rankList = []\n    if (rankStr) {\n      rankList = JSON.parse(rankStr)\n    }\n    return rankList\n  }\n\n  @log('rank')\n  showRankList() {\n    const rankList = this.getRackList()\n    const areaDom = document.getElementById('minearea')\n\n    var ranklistStr = `\n      <table border=\"1\" cellspacing=\"0\">\n        <tr>\n          <th>姓名</th>\n          <th>耗時</th>\n        </tr>\n    `\n    for (var i = 0; i < rankList.length; i++) {\n      ranklistStr += `\n        <tr>\n          <td>${rankList[i].name}</td> \n          <td>${rankList[i].time}</td>\n        </tr>\n      `\n    }\n    ranklistStr + '</table>'\n\n    areaDom.innerHTML = `<div class=\"rank\" \n        style=\"width: ${config[window['difficulty'].toLowerCase()].row *\n          config.blockWidth}px; min-height: ${config[window['difficulty'].toLowerCase()].col *\n      config.blockHeight -\n      20}px\"> \n      ${ranklistStr} \n      </div>`\n  }\n}\n\nexport default RankList\n","import DOM from './DOM'\nimport getEventCenter from '../util/EventCenter'\nimport config from '../config'\nimport log from '../util/log'\n\nclass AddRank extends DOM {\n  areaHeight: number\n  areaWidth: number\n  rankLen: number = 10\n  constructor() {\n    super()\n    setTimeout(() => {\n      this.bindEvent()\n    })\n  }\n\n  getHTMLStr(): string {\n    return `\n        <div class=\"option\" id=\"rank\">\n            排行榜\n        </div>\n    `\n  }\n\n  bindEvent(): any {\n    this.dom = document.getElementById(this.id)\n    const eventCenter = getEventCenter()\n    eventCenter.listen('game_win', () => {\n      this.gameWin()\n    })\n  }\n\n  getRackList(): Array<any> {\n    var rankStr = localStorage.getItem('rank' + window['difficulty'])\n    var rankList = []\n    if (rankStr) {\n      rankList = JSON.parse(rankStr)\n    }\n    return rankList\n  }\n\n  @log('win')\n  gameWin() {\n    let rankList = this.getRackList()\n    // 少于10人或超过10人但超过最后一名\n    if (\n      rankList.length < this.rankLen ||\n      (rankList.length >= this.rankLen && window['palyTime'] < rankList[this.rankLen - 1].time)\n    ) {\n      this.AddToRank(rankList)\n    } else {\n      alert('游戏胜利')\n    }\n  }\n\n  /**\n   * 写入前十排行榜\n   * @param rankList\n   */\n  AddToRank(rankList) {\n    const areaDom = document.getElementById('minearea')\n    const curConfig = config[window['difficulty'].toLowerCase()]\n\n    areaDom.innerHTML = `<div class=\"rank\" style=\"width: ${curConfig.row *\n      config.blockWidth}px; min-height: ${curConfig.col * config.blockHeight - 20}px\"> \n          模式：${curConfig.name} <br>\n          扫雷数：${window['mineNum']}<br>\n          耗时：${window['palyTime']}秒<br>\n          请留下大名<br>\n          <input type=\"text\" id=\"playername\" name=\"playername\">\n          <br>\n          <button id=\"submit\">提交</button>\n        </div>\n      `\n    document.getElementById('submit').onclick = () => {\n      this.pushToRankList(rankList)\n      const eventCenter = getEventCenter()\n      eventCenter.trigger('showRankList')\n    }\n  }\n\n  pushToRankList(rankList) {\n    var name = (<any>document.getElementById('playername')).value\n    rankList.push({\n      name: name,\n      time: window['palyTime']\n    })\n    rankList.sort((a, b) => {\n      return <any>a.time - <any>b.time\n    })\n    rankList = rankList.slice(0, 10)\n    localStorage.setItem('rank' + window['difficulty'], JSON.stringify(rankList))\n  }\n}\n\nexport default AddRank\n","import MineClear from '../MineClear'\nimport Face from '../components/Face'\nimport FlagCounter from '../components/FlagCounter'\nimport Timer from '../components/Timer'\nimport DifficultyPicker from '../components/DifficultyPicker'\nimport MineArea from '../components/MineArea'\nimport RankList from '../components/RackList'\nimport AddRank from '../components/GameWin'\n\nclass Build {\n  protected mineClear = new MineClear()\n\n  public renderMineClear(appId: string) {\n    const appDom: any = document.getElementById(appId)\n    const str = this.getMineClearStr()\n    appDom.innerHTML = str\n  }\n\n  getMineClearStr(): string {\n    return `\n    <div class=\"wrapper\">\n      <div class=\"head\">\n          <img src=\"./img/mine.ico\" alt=\"\">\n          <h1>扫雷</h1>\n      </div>\n      <div class=\"menu\">\n        ${this.mineClear.getDifficultyPickerStr()}\n        ${this.mineClear.getRankList()}\n      </div>\n      <div class=\"main\">\n          <!-- 状态栏 -->\n          <div class=\"state\">\n              ${this.mineClear.getFlagCounterStr()}\n              ${this.mineClear.getFaceStr()}\n              ${this.mineClear.getTimerStr()}\n          </div>\n          <!-- 雷区 -->\n          ${this.mineClear.getMineAreaStr()}\n      </div>\n  </div>\n    `\n  }\n\n  public createMineArea(config): number {\n    const mineArea = new MineArea(config.col, config.row, config.mineProbability)\n    this.mineClear.setMineArea(mineArea)\n    return mineArea.mineNum\n  }\n\n  public createDifficultyPicker(): void {\n    this.mineClear.setDifficultyPickerStr(new DifficultyPicker())\n  }\n  public createFace(): void {\n    this.mineClear.setFace(new Face())\n  }\n  public createFlagCounter(minNum): void {\n    this.mineClear.setFlagCounter(new FlagCounter(minNum))\n  }\n  public createTimer(): void {\n    this.mineClear.setTimer(new Timer())\n  }\n  public createRackList(): void {\n    this.mineClear.setRankList(new RankList())\n  }\n  public createAddRank(): void {\n    this.mineClear.setAddRank(new AddRank())\n  }\n}\n\nexport default Build\n","import Build from '../Buider/Build'\nimport MineAreaConfig from './IMineAreaConfig'\nimport log from '../util/log'\n\nclass Director {\n  protected build: Build\n  protected config: MineAreaConfig\n\n  constructor() {\n    this.build = new Build()\n  }\n\n  @log('start')\n  construct(appId: string) {\n    this.build.createDifficultyPicker()\n    this.build.createFace()\n    this.build.createTimer()\n    const mineNum = this.build.createMineArea(this.config)\n    this.build.createFlagCounter(mineNum)\n    this.build.createRackList()\n    this.build.createAddRank()\n    // 渲染\n    this.build.renderMineClear(appId)\n  }\n}\n\nexport default Director\n","import Director from './Director'\nimport config from '../config'\n\nclass DirectorEasy extends Director {\n  constructor() {\n    super()\n    this.config = config.easy\n  }\n}\n\nexport default DirectorEasy\n","import Director from './Director'\nimport config from '../config'\n\nclass DirectoGeneral extends Director {\n  constructor() {\n    super()\n    this.config = config.general\n  }\n}\n\nexport default DirectoGeneral\n","import Director from './Director'\nimport config from '../config'\n\nclass DirectoHard extends Director {\n  constructor() {\n    super()\n    this.config = config.hard\n  }\n}\n\nexport default DirectoHard\n","import DirectorEasy from '../director/DirectorEasy'\nimport DirectorGeneral from '../director/DirectorGeneral'\nimport DirectorHard from '../director/DirectorHard'\n\nexport default {\n  DirectorEasy,\n  DirectorGeneral,\n  DirectorHard\n}\n","import classMap from './classMap'\n\nexport default (className: string) => {\n  if (className in classMap) {\n    return new classMap[className]()\n  } else {\n    throw TypeError('no this class: ' + className)\n  }\n}\n","import classFactory from './ClassFactory'\n\nconst initDifficulty = 'Easy'\n\ntry {\n  window['difficulty'] = initDifficulty\n  const director = classFactory(`Director${initDifficulty}`)\n  director.construct('app')\n} catch (e) {\n  console.error(e)\n}\n"],"names":["tslib_1.__extends","getEventCenter","getNumberHTMLStr","getCurTime","tslib_1.__decorate"],"mappings":"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"}