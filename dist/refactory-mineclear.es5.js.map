{"version":3,"file":"refactory-mineclear.es5.js","sources":["../src/MineClear.ts","../src/components/DOM.ts","../src/util/EventCenter.ts","../src/components/Face.ts","../src/util/getNumberHTMLStr.ts","../src/components/FlagCounter.ts","../src/components/Timer.ts","../src/components/DifficultyPicker.ts","../src/util/stopPropagation.js","../src/util/StateMachine.ts","../src/util/getCurentTime.ts","../src/util/log.ts","../src/components/Block.ts","../src/components/MineArea.ts","../src/config.ts","../src/components/RackList.ts","../src/components/GameWin.ts","../src/Buider/Build.ts","../src/director/Director.ts","../src/director/DirectorEasy.ts","../src/director/DirectorGeneral.ts","../src/director/DirectorHard.ts","../src/ClassFactory/classMap.ts","../src/ClassFactory/index.ts","../src/index.ts"],"sourcesContent":["import Face from './components/Face'\nimport FlagCounter from './components/FlagCounter'\nimport Timer from './components/Timer'\nimport MineArea from './components/MineArea'\nimport DifficultyPicker from './components/DifficultyPicker'\nimport RankList from './components/RackList'\nimport AddRank from './components/GameWin'\n\nclass MineClear {\n  $el: any\n\n  difficultyPicker: DifficultyPicker\n  face: Face\n  timer: Timer\n  flagCounter: FlagCounter\n  mineArea: MineArea\n  rankList: RankList\n  addRank: AddRank\n\n  setDifficultyPickerStr(difficultyPicker: DifficultyPicker) {\n    this.difficultyPicker = difficultyPicker\n  }\n  getDifficultyPickerStr() {\n    return this.difficultyPicker.getHTMLStr()\n  }\n\n  setFace(face: Face): void {\n    this.face = face\n  }\n  getFaceStr(): string {\n    return this.face.getHTMLStr()\n  }\n\n  setTimer(timer: Timer): void {\n    this.timer = timer\n  }\n  getTimerStr(): string {\n    return this.timer.getHTMLStr()\n  }\n\n  setFlagCounter(flagCounter: FlagCounter): void {\n    this.flagCounter = flagCounter\n  }\n  getFlagCounterStr(): string {\n    return this.flagCounter.getHTMLStr()\n  }\n\n  setMineArea(mineArea: MineArea): void {\n    this.mineArea = mineArea\n  }\n  getMineAreaStr(): string {\n    return this.mineArea.getHTMLStr()\n  }\n\n  setRankList(rankList: RankList): void {\n    this.rankList = rankList\n  }\n  getRankList(): string {\n    return this.rankList.getHTMLStr()\n  }\n\n  setAddRank(rankList: AddRank): void {\n    this.addRank = rankList\n  }\n  getAddRank(): string {\n    return this.rankList.getHTMLStr()\n  }\n}\n\nexport default MineClear\n","abstract class DOM {\n  protected htmlStr: string\n  protected dom: any\n  protected id: string\n  public abstract getHTMLStr(): string\n}\n\nexport default DOM\n","class EventCenter {\n  // 存储事件于其回调函数\n  clientList: {\n    [propName: string]: Array<Function>\n  } = {}\n\n  // 监听事件，为事件名添加回调函数\n  listen(eventName: string, callback: Function): void {\n    if (!this.clientList[eventName]) {\n      this.clientList[eventName] = []\n    }\n    this.clientList[eventName].push(callback) // 订阅的消息添加进缓存列表\n  }\n\n  // 出发某事件，调用其所有的回调函数\n  trigger(eventName, ...args): boolean {\n    var callbacks = this.clientList[eventName]\n    if (!callbacks || callbacks.length === 0) {\n      // 如果没有绑定对应的消息\n      return false\n    }\n    for (var i = 0, callback; (callback = callbacks[i++]); ) {\n      callback(...args)\n    }\n    return true\n  }\n\n  // 为某个事件移除一个监听对象\n  remove(eventName: string, callback: Function): void {\n    var callbacks = this.clientList[eventName]\n    if (!callbacks) {\n      // 如果 eventName 对应的消息没有被人订阅，则直接返回\n      return\n    }\n    if (!callback) {\n      // 如果没有传入具体的回调函数，表示需要取消 eventName 对应消息的所有订阅\n      callbacks && (callbacks.length = 0)\n    } else {\n      for (var l = callbacks.length - 1; l >= 0; l--) {\n        // 反向遍历订阅的回调函数列表\n        var _callback = callbacks[l]\n        if (_callback === callback) {\n          callbacks.splice(l, 1) // 删除订阅者的回调函数\n        }\n      }\n    }\n  }\n\n  // 清空缓存\n  clearAll() {\n    this.clientList = {}\n  }\n}\n\n// 返回单例\nlet getSingleEventCenter = (function() {\n  let eventCenter\n  return function() {\n    if (!eventCenter) {\n      eventCenter = new EventCenter()\n    }\n    return eventCenter\n  }\n})()\n\nexport default getSingleEventCenter\n","import DOM from './DOM'\nimport getEventCenter from '../util/EventCenter'\nimport classFactory from '../ClassFactory'\n\nconst faceImg = {\n  smile: `<img src=\"./img/face_normal.bmp\" alt=\"\">`,\n  cry: `<img src=\"./img/face_fail.bmp\" alt=\"\">`\n}\n\nclass Face extends DOM {\n  constructor() {\n    super()\n    this.id = 'face'\n    setTimeout(() => {\n      this.bindEvent()\n    })\n  }\n\n  getHTMLStr(): string {\n    return `\n      <div class=\"face\" id=\"face\">\n        ${faceImg.smile}\n      </div>\n    `\n  }\n\n  bindEvent(): any {\n    this.dom = document.getElementById(this.id)\n    this.dom.onclick = () => {\n      this.reStartGame()\n    }\n    const eventCenter = getEventCenter()\n    eventCenter.listen('bomb_exploded', this.cryFace.bind(this))\n  }\n\n  cryFace(): any {\n    this.dom.innerHTML = faceImg.cry\n  }\n\n  /**\n   * 使用反射，重新构建APP\n   */\n  reStartGame(): void {\n    try {\n      const eventCenter = getEventCenter()\n      eventCenter.clearAll()\n      const director = classFactory(`Director${window['difficulty']}`)\n      director.construct('app')\n    } catch (e) {\n      console.error(e)\n    }\n  }\n}\nexport default Face\n","export default function getNumerHTMLStr(number) {\n  const secondNums = ('000' + number).slice(-3).split('')\n\n  return `\n        <img src=\"./img/d${secondNums[0]}.bmp\" alt=\"\">\n        <img src=\"./img/d${secondNums[1]}.bmp\" alt=\"\">\n        <img src=\"./img/d${secondNums[2]}.bmp\" alt=\"\">\n    `\n}\n","import DOM from './DOM'\nimport getEventCenter from '../util/EventCenter'\nimport getNumberHTMLStr from '../util/getNumberHTMLStr'\n\nclass FlagCounter extends DOM {\n  private flagNum: number = 0\n  private mineNum: number = 0\n  private correctFind: number = 0\n  constructor(mineNum) {\n    super()\n    this.id = 'flagcounter'\n    this.flagNum = this.mineNum = mineNum\n    setTimeout(() => {\n      this.bindEvent()\n    })\n  }\n\n  public getHTMLStr(): string {\n    return `\n      <div class=\"flagsNum\" id=\"flagcounter\">\n          ${getNumberHTMLStr(this.flagNum)}\n      </div>\n    `\n  }\n\n  private bindEvent() {\n    this.dom = document.getElementById(this.id)\n\n    const eventCenter = getEventCenter()\n\n    eventCenter.listen('setFlagNum', num => {\n      this.flagNum = num\n    })\n\n    eventCenter.listen('flag_unuse', () => {\n      this.flagNum++\n      this.dom.innerHTML = getNumberHTMLStr(this.flagNum)\n    })\n\n    eventCenter.listen('flag_use', this.useFlag.bind(this))\n\n    eventCenter.listen('correct_find', () => {\n      this.correctFind++\n    })\n\n    eventCenter.listen('error_find', () => {\n      this.correctFind--\n    })\n  }\n\n  private useFlag(x, y) {\n    const eventCenter = getEventCenter()\n    this.flagNum--\n    if (this.flagNum < 0) {\n      eventCenter.trigger('flag_empty', x, y)\n      return\n    } else if (this.flagNum == 0) {\n      if (this.correctFind === this.mineNum) {\n        eventCenter.trigger('game_win')\n      }\n    }\n    this.dom.innerHTML = getNumberHTMLStr(this.flagNum)\n  }\n}\n\nexport default FlagCounter\n","import DOM from './DOM'\nimport getEventCenter from '../util/EventCenter'\nimport getNumberHTMLStr from '../util/getNumberHTMLStr'\n\nclass Timer extends DOM {\n  private timer = null\n  private second: number = 0\n  constructor() {\n    super()\n    this.id = 'timer'\n    setTimeout(() => {\n      this.bindEvent()\n    })\n  }\n\n  public getHTMLStr(): string {\n    return `\n      <div class=\"timer\" id=\"timer\">\n          ${getNumberHTMLStr(this.second)}\n      </div>\n    `\n  }\n\n  private bindEvent() {\n    this.dom = document.getElementById(this.id)\n\n    const eventCenter = getEventCenter()\n    eventCenter.listen('bomb_exploded', this.endTimer.bind(this))\n    eventCenter.listen('game_win', this.endTimer.bind(this))\n    eventCenter.listen('minearea_click', this.startTimer.bind(this))\n  }\n\n  private startTimer() {\n    if (!this.timer) {\n      this.timer = setInterval(() => {\n        this.secondAdd()\n      }, 1000)\n    }\n  }\n\n  private endTimer() {\n    clearInterval(this.timer)\n  }\n\n  private secondAdd(): void {\n    this.second++\n    window['palyTime'] = this.second\n    this.dom.innerHTML = getNumberHTMLStr(this.second)\n  }\n}\n\nexport default Timer\n","import DOM from './DOM'\nimport classFactory from '../ClassFactory'\nimport getEventCenter from '../util/EventCenter'\nimport config from '../config'\n\nclass DifficultyPicker extends DOM {\n  difficultyMap = {\n    Easy: '简单',\n    General: '普通',\n    Hard: '困难'\n  }\n  constructor() {\n    super()\n    this.id = 'difficulty'\n    setTimeout(() => {\n      this.bindEvent()\n    })\n  }\n\n  private bindEvent(): any {\n    this.dom = document.getElementById(this.id)\n    this.dom.onclick = e => {\n      const value = (<any>e.target).value\n      if (value != undefined && value != 0) {\n        this.reStartGame(value)\n      }\n    }\n  }\n\n  private reStartGame(difficulty: string) {\n    try {\n      const eventCenter = getEventCenter()\n      eventCenter.clearAll()\n      const director = classFactory(`Director${difficulty}`)\n      window['difficulty'] = difficulty\n      director.construct('app')\n    } catch (e) {\n      console.error(e)\n    }\n  }\n\n  getHTMLStr(): string {\n    const difficulty = window['difficulty']\n    return `\n      <div class=\"option\">\n        <span>难度: </span>\n        <span>${this.difficultyMap[difficulty]}</span>\n        <ul class=\"difficul\" id=\"difficulty\">\n            <li><label><input name=\"difficultyopt\" type=\"radio\" value=\"Easy\" ${difficulty ==\n              'Easy' && 'checked'}/><span></span>${this.difficultyMap.Easy}</label></li>\n            <li><label><input name=\"difficultyopt\" type=\"radio\" value=\"General\" ${difficulty ==\n              'General' && 'checked'}/><span></span>${this.difficultyMap.General}</label></li>\n            <li><label><input name=\"difficultyopt\" type=\"radio\" value=\"Hard\" ${difficulty ==\n              'Hard' && 'checked'}/><span></span>${this.difficultyMap.Hard}</label></li>\n        </ul>\n      </div>\n    `\n  }\n}\n\nexport default DifficultyPicker\n","/**\r\n * 阻止时间冒泡\r\n * @param {*} event 事件\r\n */\r\nfunction stopBubble(event) {\r\n  if (event.stopPropagation) {\r\n    event.stopPropagation()\r\n  } else {\r\n    event.cancelBubble = true\r\n  }\r\n  return false\r\n}\r\n\r\nexport default stopBubble","interface StateMap {\n  [propName: string]: {\n    nextState: string\n    handler: Function\n  }\n}\n/**\n * 简单状态机\n */\nclass StateMachine {\n  stateMap: StateMap\n  curState\n  constructor(curState: string, stateMap: StateMap) {\n    this.stateMap = stateMap\n    this.curState = curState\n  }\n  next(...args) {\n    this.curState = this.stateMap[this.curState].nextState\n    this.stateMap[this.curState].handler()\n    return false\n  }\n}\n\nexport default StateMachine\n","export default function getCurentTime() {\n  var now = new Date()\n\n  var year = now.getFullYear() //年\n  var month = now.getMonth() + 1 //月\n  var day = now.getDate() //日\n  var hh = now.getHours() //时\n  var mm = now.getMinutes() //分\n\n  var clock = year + '-'\n\n  if (month < 10) clock += '0'\n  clock += month + '-'\n\n  if (day < 10) clock += '0'\n  clock += day + ' '\n\n  if (hh < 10) clock += '0'\n  clock += hh + ':'\n\n  if (mm < 10) clock += '0'\n  clock += mm\n\n  return clock\n}\n","import getCurTime from './getCurentTime'\n/**\n * 记录日志\n * @param type 日志名\n */\nexport default function(type) {\n  return function(target: any, propertyKey: string, descriptor: PropertyDescriptor) {\n    var oldValue = descriptor.value\n\n    descriptor.value = function() {\n      console.log(`${type}  ${getCurTime()}`)\n      return oldValue.apply(this, arguments)\n    }\n\n    return descriptor\n  }\n}\n","import DOM from './DOM'\nimport stopBubble from '../util/stopPropagation'\nimport getEventCenter from '../util/EventCenter'\nimport StateMachine from '../util/StateMachine'\nimport log from '../util/log'\n\nclass Block extends DOM {\n  public point: number = 0\n  private isBomb: boolean\n  private x: number\n  private y: number\n  private hasClicked: boolean = false\n  private rightClickState: StateMachine\n\n  constructor(isBomb: boolean, posX, posY) {\n    super()\n    this.isBomb = isBomb\n    this.x = posX\n    this.y = posY\n    this.id = `block_${this.x}_${this.y}`\n    this.listenEvent()\n    this.initState()\n    setTimeout(() => this.bindEvent())\n  }\n\n  // 初始化时获得其DOM字串\n  public getHTMLStr(): string {\n    return `<li id=\"${this.id}\" class=\"block\"></li>`\n  }\n\n  // 判断是否是雷\n  public isbomb(): boolean {\n    return this.isBomb\n  }\n\n  // 注册事件监听\n  private listenEvent(): void {\n    const eventCenter = getEventCenter()\n    if (this.isBomb) {\n      eventCenter.listen('bomb_exploded', this.exploade.bind(this))\n    } else {\n      eventCenter.listen('blank_expand', this.showPoint.bind(this))\n      eventCenter.listen('bomb_exploded', () => {\n        this.hasClicked = true\n      })\n    }\n    // 当旗子用完了之后，标记为 ‘?’\n    eventCenter.listen('flag_empty', (x, y) => {\n      if (x === this.x && y === this.y) {\n        this.rightClickState.next()\n      }\n    })\n  }\n\n  // 使用转态模式管理扫雷时右键点击时方块的样式改变\n  private initState(): void {\n    const eventCenter = getEventCenter()\n    this.rightClickState = new StateMachine('blank', {\n      blank: {\n        nextState: 'flag',\n        handler: () => {\n          this.dom.innerHTML = ``\n        }\n      },\n      flag: {\n        nextState: 'doubt',\n        handler: () => {\n          this.dom.innerHTML = `<img src=\"./img/flag.bmp\" alt=\"\">`\n          if (this.isBomb) {\n            eventCenter.trigger('correct_find')\n          }\n          eventCenter.trigger('flag_use', this.x, this.y)\n        }\n      },\n      doubt: {\n        nextState: 'blank',\n        handler: () => {\n          this.dom.innerHTML = `<img src=\"./img/ask.bmp\" alt=\"\">`\n          if (this.isBomb) {\n            eventCenter.trigger('error_find')\n          }\n          eventCenter.trigger('flag_unuse')\n        }\n      }\n    })\n  }\n\n  // 雷爆炸\n  @log('fail')\n  private exploade(id): void {\n    this.hasClicked = true\n    if (this.id === id) {\n      this.dom.innerHTML = `<img src=\"./img/error.bmp\" alt=\"\">`\n    } else {\n      this.dom.innerHTML = `<img src=\"./img/blood.bmp\" alt=\"\">`\n    }\n  }\n\n  /**\n   * 展示此格子的值，如果此格子为空白点，则触发 ‘blank_expand’事件\n   * @param x\n   * @param y\n   */\n  private showPoint(x, y) {\n    // 判断是自己或者是周围的点\n    const isAroundOrSlef =\n      (x === this.x || x === this.x + 1 || x === this.x - 1) &&\n      (y === this.y || y === this.y + 1 || y === this.y - 1)\n\n    if (isAroundOrSlef && !this.hasClicked) {\n      this.dom.innerHTML = '<span class=\"point' + this.point + '\">' + this.point + '</span>'\n      // 他也是空白点，那么需要拓展开来\n      if (this.point === 0) {\n        this.hasClicked = true\n        const eventCenter = getEventCenter()\n        eventCenter.trigger('blank_expand', this.x, this.y)\n      } else {\n        this.hasClicked = true\n      }\n    }\n  }\n\n  // 绑定事件\n  private bindEvent() {\n    this.dom = document.getElementById(this.id)\n    // 左键点击\n    this.dom.onclick = () => {\n      if (this.isBomb) {\n        const eventCenter = getEventCenter()\n        eventCenter.trigger('bomb_exploded', this.id)\n      } else {\n        this.showPoint(this.x, this.y)\n      }\n    }\n    // 右键点击\n    this.dom.oncontextmenu = e => {\n      stopBubble(e)\n      if (!this.hasClicked) {\n        this.rightClickState.next()\n      }\n      return false\n    }\n  }\n}\n\nexport default Block\n","import DOM from './DOM'\nimport Block from './Block'\nimport getEventCenter from '../util/EventCenter'\n\nclass MineArea extends DOM {\n  public mineNum: number = 0\n  protected row: number\n  protected col: number\n  protected mineProbability: number\n  private blockMap: Array<Array<Block>>\n\n  constructor(col, row, mineProbability) {\n    super()\n    this.col = col\n    this.row = row\n    this.mineProbability = mineProbability\n    this.createMineMap()\n    this.setPoint()\n    setTimeout(() => this.bindEvent())\n  }\n\n  public getHTMLStr(): string {\n    this.id = 'minearea'\n    let htmlStr = ''\n    htmlStr += `<div class=\"mines\" id=\"minearea\"> <ul class=\"col\">`\n    for (let y = 0; y < this.col; y++) {\n      htmlStr += `<li><ul class=\"row\">`\n      for (let x = 0; x < this.row; x++) {\n        htmlStr += this.blockMap[y][x].getHTMLStr()\n      }\n      htmlStr += `</ul> </li>`\n    }\n    htmlStr += `</ul> </div>`\n    return htmlStr\n  }\n\n  // 创建map\n  protected createMineMap(): void {\n    this.blockMap = []\n    //y 为纵向坐标\n    for (let y = 0; y < this.col; y++) {\n      this.blockMap[y] = []\n      //x 为横向坐标\n      for (let x = 0; x < this.row; x++) {\n        const isMine = this.getRandomByProbablity()\n        isMine && this.mineNum++\n        this.blockMap[y].push(new Block(isMine, y, x))\n      }\n    }\n    const eventCenter = getEventCenter()\n    window['mineNum'] = this.mineNum\n    eventCenter.trigger('setFlagNum', this.mineNum)\n  }\n\n  // 设置点数\n  protected setPoint(): void {\n    const map = this.blockMap\n    for (let y = 0; y < this.col; y++) {\n      for (let x = 0; x < this.row; x++) {\n        if (map[y][x].isbomb()) {\n          if (y > 0 && !map[y - 1][x].isbomb()) {\n            map[y - 1][x].point++ //上方\n          }\n          if (y < this.col - 1 && !map[y + 1][x].isbomb()) {\n            map[y + 1][x].point++ //下方\n          }\n          if (x > 0 && !map[y][x - 1].isbomb()) {\n            map[y][x - 1].point++ //左方\n          }\n          if (x < this.row - 1 && !map[y][x + 1].isbomb()) {\n            map[y][x + 1].point++ //右方\n          }\n          if (x > 0 && y > 0 && !map[y - 1][x - 1].isbomb()) {\n            map[y - 1][x - 1].point++ //左上方\n          }\n          if (x < this.row - 1 && y > 0 && !map[y - 1][x + 1].isbomb()) {\n            map[y - 1][x + 1].point++ // 右上方\n          }\n          if (x > 0 && y < this.col - 1 && !map[y + 1][x - 1].isbomb()) {\n            map[y + 1][x - 1].point++ //左下方\n          }\n          if (x < this.row - 1 && y < this.col - 1 && !map[y + 1][x + 1].isbomb()) {\n            map[y + 1][x + 1].point++ //右下方\n          }\n        }\n      }\n    }\n  }\n\n  // 绑定事件\n  protected bindEvent(): void {\n    this.dom = document.getElementById(this.id)\n    this.dom.onclick = () => {\n      const eventCenter = getEventCenter()\n      eventCenter.trigger('minearea_click')\n    }\n  }\n\n  private getRandomByProbablity(): boolean {\n    return Math.random() > 1 - this.mineProbability\n  }\n}\n\nexport default MineArea\n","export default {\n  easy: {\n    name: '简单',\n    col: 6,\n    row: 8,\n    mineProbability: 0.1\n  },\n  general: {\n    name: '普通',\n    row: 18,\n    col: 14,\n    mineProbability: 0.12\n  },\n  hard: {\n    name: '困难',\n    col: 16,\n    row: 30,\n    mineProbability: 0.15\n  },\n  blockWidth: 25,\n  blockHeight: 25\n}\n","import DOM from './DOM'\nimport getEventCenter from '../util/EventCenter'\nimport config from '../config'\nimport log from '../util/log'\n\nclass RankList extends DOM {\n  areaHeight: number\n  areaWidth: number\n  constructor() {\n    super()\n    this.id = 'rank'\n    setTimeout(() => {\n      this.bindEvent()\n    })\n  }\n\n  getHTMLStr(): string {\n    return `\n        <div class=\"option\" id=\"rank\">\n            排行榜\n        </div>\n    `\n  }\n\n  bindEvent(): any {\n    this.dom = document.getElementById(this.id)\n    const eventCenter = getEventCenter()\n\n    this.dom.onclick = () => {\n      this.showRankList()\n    }\n    eventCenter.listen('showRankList', () => {\n      this.showRankList()\n    })\n  }\n\n  getRackList(): Array<any> {\n    var rankStr = localStorage.getItem('rank' + window['difficulty'])\n    var rankList = []\n    if (rankStr) {\n      rankList = JSON.parse(rankStr)\n    }\n    return rankList\n  }\n\n  @log('rank')\n  showRankList() {\n    const rankList = this.getRackList()\n    const areaDom = document.getElementById('minearea')\n\n    var ranklistStr = `\n      <table border=\"1\" cellspacing=\"0\">\n        <tr>\n          <th>姓名</th>\n          <th>耗時</th>\n        </tr>\n    `\n    for (var i = 0; i < rankList.length; i++) {\n      ranklistStr += `\n        <tr>\n          <td>${rankList[i].name}</td> \n          <td>${rankList[i].time}</td>\n        </tr>\n      `\n    }\n    ranklistStr + '</table>'\n\n    areaDom.innerHTML = `<div class=\"rank\" \n        style=\"width: ${config[window['difficulty'].toLowerCase()].row *\n          config.blockWidth}px; min-height: ${config[window['difficulty'].toLowerCase()].col *\n      config.blockHeight -\n      20}px\"> \n      ${ranklistStr} \n      </div>`\n  }\n}\n\nexport default RankList\n","import DOM from './DOM'\nimport getEventCenter from '../util/EventCenter'\nimport config from '../config'\nimport log from '../util/log'\n\nclass AddRank extends DOM {\n  areaHeight: number\n  areaWidth: number\n  rankLen: number = 10\n  constructor() {\n    super()\n    setTimeout(() => {\n      this.bindEvent()\n    })\n  }\n\n  getHTMLStr(): string {\n    return `\n        <div class=\"option\" id=\"rank\">\n            排行榜\n        </div>\n    `\n  }\n\n  bindEvent(): any {\n    this.dom = document.getElementById(this.id)\n    const eventCenter = getEventCenter()\n    eventCenter.listen('game_win', () => {\n      this.gameWin()\n    })\n  }\n\n  getRackList(): Array<any> {\n    var rankStr = localStorage.getItem('rank' + window['difficulty'])\n    var rankList = []\n    if (rankStr) {\n      rankList = JSON.parse(rankStr)\n    }\n    return rankList\n  }\n\n  @log('win')\n  gameWin() {\n    let rankList = this.getRackList()\n    // 少于10人或超过10人但超过最后一名\n    if (\n      rankList.length < this.rankLen ||\n      (rankList.length >= this.rankLen && window['palyTime'] < rankList[this.rankLen - 1].time)\n    ) {\n      this.AddToRank(rankList)\n    } else {\n      alert('游戏胜利')\n    }\n  }\n\n  /**\n   * 写入前十排行榜\n   * @param rankList\n   */\n  AddToRank(rankList) {\n    const areaDom = document.getElementById('minearea')\n    const curConfig = config[window['difficulty'].toLowerCase()]\n\n    areaDom.innerHTML = `<div class=\"rank\" style=\"width: ${curConfig.row *\n      config.blockWidth}px; min-height: ${curConfig.col * config.blockHeight - 20}px\"> \n          模式：${curConfig.name} <br>\n          扫雷数：${window['mineNum']}<br>\n          耗时：${window['palyTime']}秒<br>\n          请留下大名<br>\n          <input type=\"text\" id=\"playername\" name=\"playername\">\n          <br>\n          <button id=\"submit\">提交</button>\n        </div>\n      `\n    document.getElementById('submit').onclick = () => {\n      this.pushToRankList(rankList)\n      const eventCenter = getEventCenter()\n      eventCenter.trigger('showRankList')\n    }\n  }\n\n  pushToRankList(rankList) {\n    var name = (<any>document.getElementById('playername')).value\n    rankList.push({\n      name: name,\n      time: window['palyTime']\n    })\n    rankList.sort((a, b) => {\n      return <any>a.time - <any>b.time\n    })\n    rankList = rankList.slice(0, 10)\n    localStorage.setItem('rank' + window['difficulty'], JSON.stringify(rankList))\n  }\n}\n\nexport default AddRank\n","import MineClear from '../MineClear'\nimport Face from '../components/Face'\nimport FlagCounter from '../components/FlagCounter'\nimport Timer from '../components/Timer'\nimport DifficultyPicker from '../components/DifficultyPicker'\nimport MineArea from '../components/MineArea'\nimport RankList from '../components/RackList'\nimport AddRank from '../components/GameWin'\n\nclass Build {\n  public mineClear = new MineClear()\n\n  public createMineArea(config): number {\n    const mineArea = new MineArea(config.col, config.row, config.mineProbability)\n    this.mineClear.setMineArea(mineArea)\n    return mineArea.mineNum\n  }\n\n  public createDifficultyPicker(): void {\n    this.mineClear.setDifficultyPickerStr(new DifficultyPicker())\n  }\n  public createFace(): void {\n    this.mineClear.setFace(new Face())\n  }\n  public createFlagCounter(minNum): void {\n    this.mineClear.setFlagCounter(new FlagCounter(minNum))\n  }\n  public createTimer(): void {\n    this.mineClear.setTimer(new Timer())\n  }\n  public createRackList(): void {\n    this.mineClear.setRankList(new RankList())\n  }\n  public createAddRank(): void {\n    this.mineClear.setAddRank(new AddRank())\n  }\n}\n\nexport default Build\n","import Build from '../Buider/Build'\nimport MineAreaConfig from './IMineAreaConfig'\nimport log from '../util/log'\n\nclass Director {\n  protected build: Build\n  protected config: MineAreaConfig\n\n  constructor() {\n    this.build = new Build()\n  }\n\n  @log('start')\n  construct(appId: string) {\n    this.build.createDifficultyPicker()\n    this.build.createFace()\n    this.build.createTimer()\n    const mineNum = this.build.createMineArea(this.config)\n    this.build.createFlagCounter(mineNum)\n    this.build.createRackList()\n    this.build.createAddRank()\n    // 渲染\n    this.renderMineClear(appId)\n  }\n  \n  renderMineClear(appId: string) {\n    const appDom: any = document.getElementById(appId)\n    const str = this.getMineClearStr()\n    appDom.innerHTML = str\n  }\n\n  getMineClearStr() {\n    const mineClear = this.build.mineClear;\n    return `\n      <div class=\"wrapper\">\n        <div class=\"head\">\n            <img src=\"./img/mine.ico\" alt=\"\">\n            <h1>扫雷</h1>\n        </div>\n        <div class=\"menu\">\n          ${mineClear.getDifficultyPickerStr()}\n          ${mineClear.getRankList()}\n        </div>\n        <div class=\"main\">\n            <!-- 状态栏 -->\n            <div class=\"state\">\n                ${mineClear.getFlagCounterStr()}\n                ${mineClear.getFaceStr()}\n                ${mineClear.getTimerStr()}\n            </div>\n            <!-- 雷区 -->\n            ${mineClear.getMineAreaStr()}\n        </div>\n    </div>\n    `\n  }\n\n}\n\nexport default Director\n","import Director from './Director'\nimport config from '../config'\n\nclass DirectorEasy extends Director {\n  constructor() {\n    super()\n    this.config = config.easy\n  }\n}\n\nexport default DirectorEasy\n","import Director from './Director'\nimport config from '../config'\n\nclass DirectoGeneral extends Director {\n  constructor() {\n    super()\n    this.config = config.general\n  }\n}\n\nexport default DirectoGeneral\n","import Director from './Director'\nimport config from '../config'\n\nclass DirectoHard extends Director {\n  constructor() {\n    super()\n    this.config = config.hard\n  }\n}\n\nexport default DirectoHard\n","import DirectorEasy from '../director/DirectorEasy'\nimport DirectorGeneral from '../director/DirectorGeneral'\nimport DirectorHard from '../director/DirectorHard'\n\nexport default {\n  DirectorEasy,\n  DirectorGeneral,\n  DirectorHard\n}\n","import classMap from './classMap'\n\nexport default (className: string) => {\n  if (className in classMap) {\n    return new classMap[className]()\n  } else {\n    throw TypeError('no this class: ' + className)\n  }\n}\n","import classFactory from './ClassFactory'\n\nconst initDifficulty = 'Easy'\n\ntry {\n  window['difficulty'] = initDifficulty\n  const director = classFactory(`Director${initDifficulty}`)\n  director.construct('app')\n} catch (e) {\n  console.error(e)\n}\n"],"names":["tslib_1.__extends","getEventCenter","getNumberHTMLStr","getCurTime","tslib_1.__decorate"],"mappings":"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"}